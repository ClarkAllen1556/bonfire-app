<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.26.0">
    <meta name="project" content="bonfire v0.1.0-cooperation-beta.101">

    <title>Bonfire.Data.AccessControl — bonfire v0.1.0-cooperation-beta.101</title>
    <link rel="stylesheet" href="dist/elixir-b5076885a795c65e636c.css" />

    <script src="dist/sidebar_items-726386a789.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-a404e1e870b77c874f9e.js"></script>


  </head>
  <body data-type="extras">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName" translate="no">
bonfire
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.1.0-cooperation-beta.101
      </strong>
    </div>

      <a href="readme.html">
        <img src="assets/logo.png" alt="bonfire" class="sidebar-projectImage">
      </a>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


      <li><a id="tasks-list-link" href="#full-list"><span translate="no">Mix</span> Tasks</a></li>

  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1 id="content">
Bonfire.Data.AccessControl

</h1>

<p>Bonfire has a slightly unusual way of dealing with access control.
It's not so different from role-based access control (RBAC), but we do
a few things differently and there are quite a lot of pieces to get
your head around. We'll start gently.</p><p>Bonfire has a <code class="inline">Verb</code> table containing strings like &quot;comment&quot; and
&quot;delete&quot; that represent actions a user might wish to perform. They are
a basic part of the bonfire vocabulary within the codebase.</p><p>A <code class="inline">Permission</code> is a decision about whether the action may be performed
it not. There are 3 decisions we support:</p><ul><li><code class="inline">true</code> (permitted)</li><li><code class="inline">false</code> (explicitly not permitted, never permit)</li><li><code class="inline">null</code>/<code class="inline">nil</code> (not explicitly permitted)</li></ul><p>It may seem odd to have the <code class="inline">null</code> here. We will come back to this
after we've introduced a few more pieces of the puzzle.</p><p>A <code class="inline">Boundary</code> is simply an unordered list or group of <code class="inline">Permission</code>s. Each
<code class="inline">Permission</code> may only occur once. Any <code class="inline">Permission</code>s that are not specified
are assumed to be <code class="inline">null</code>. This loosely corresponds to a <code class="inline">role</code> in RBAC.</p><p>A <code class="inline">Grant</code> links a <code class="inline">subject</code> (user or circle) to a <code class="inline">Boundary</code>. It
determines what permissions are considered for a given subject.</p><p>A <code class="inline">Acl</code> is simply an unordered list or group of <code class="inline">Grant</code>s. Subjects may
appear more than once in a list (with different boundaries) and the
permissions will be merged according to the following truth table:</p><table><thead><tr><th style="text-align: left;">input</th><th style="text-align: left;">input</th><th style="text-align: left;">output</th></tr></thead><tbody><tr><td style="text-align: left;">false</td><td style="text-align: left;">false</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">false</td><td style="text-align: left;">true</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">false</td><td style="text-align: left;">null</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">true</td><td style="text-align: left;">false</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">true</td><td style="text-align: left;">true</td><td style="text-align: left;">true</td></tr><tr><td style="text-align: left;">true</td><td style="text-align: left;">null</td><td style="text-align: left;">true</td></tr><tr><td style="text-align: left;">null</td><td style="text-align: left;">false</td><td style="text-align: left;">false</td></tr><tr><td style="text-align: left;">null</td><td style="text-align: left;">true</td><td style="text-align: left;">true</td></tr><tr><td style="text-align: left;">null</td><td style="text-align: left;">null</td><td style="text-align: left;">null</td></tr></tbody></table><p>Or in words: take the highest value where <code class="inline">false &gt; true &gt; null</code>.</p><p>At the end of this combination process, the user is only permitted if
the result is true. You can see this as requiring an affirmative
answer to permit something, while always allowing you a bigger <code class="inline">no</code> to
deny when things are combined. Null values are additionally not
required to be present in the database, saving us resources. That is
to say we default to null if there is no relevant record.</p><p>Finally, the <code class="inline">Controlled</code> mixin is used to determine which <code class="inline">Acl</code> is
considered when determining permissions.</p><h2 id="copyright-and-license" class="section-heading">
  <a href="#copyright-and-license" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Copyright and License
</h2>
<p>Copyright (c) 2020 James Laver, <code class="inline">bonfire_data_access_control</code> Contributors</p><p>This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/.">http://mozilla.org/MPL/2.0/.</a></p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="bonfire_common.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Bonfire.Common
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="bonfire_data_activity_pub.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Bonfire.Data.ActivityPub
        </span>
      </a>

  </div>
</div>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.26.0) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire" translate="no">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button display-settings">
            Settings
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
